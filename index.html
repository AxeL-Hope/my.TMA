<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web App Init Data</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        window.onload = function() {
            // Получение данных
            const initData = Telegram.WebApp.initData;
            const initDataUnsafe = Telegram.WebApp.initDataUnsafe;

            // Отображение данных на странице
            document.getElementById("initData").textContent = "initData: " + initData;
            document.getElementById("initDataUnsafe").textContent = "initDataUnsafe: " + JSON.stringify(initDataUnsafe, null, 2);
        };

        const DemoApp = {
            sendMessage: function(message, withWebview) {
                const combinedData = {
                    initData: Telegram.WebApp.initData,
                    initDataUnsafe: Telegram.WebApp.initDataUnsafe
                };
                const messageToSend = message || 'Hello, World!';
                Telegram.WebApp.sendData(JSON.stringify({ message: messageToSend, withWebview: withWebview, data: combinedData }));
            }
        };
    </script>
</head>
<body>
    <h1>Telegram WebApp Init Data</h1>
    <pre id="initData"></pre>
    <pre id="initDataUnsafe"></pre>
    <button id="with_webview_btn" onclick="DemoApp.sendMessage('', true);">Send «Hello, World!» with inline webview button</button>
</body>
</html>
